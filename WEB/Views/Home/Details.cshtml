@model BLL.DTO.SaleInfoDTO

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div class="table table-bordered">
    <h4>SaleInfoDTO</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.ProductName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProductPrice)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductPrice)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ClientName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ClientName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ManagerName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ManagerName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.DateOfSale)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.DateOfSale)
        </dd>

    </dl>
</div>
<div align="center" id="chart_container" style="height: 300px">
    <p>Chart's @Model.ManagerName</p>
    <canvas id="bar_chart"></canvas>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new {  id = Model.SaleInfoId  }) |
    @Html.ActionLink("Delete", "Delete", new { id = Model.SaleInfoId }) |
    @Html.ActionLink("Back to List", "Index")
</p>

<script>
    var productsArray = @Html.Raw(Json.Encode(ViewBag.PRODUCTS));
    var count = @Html.Raw(Json.Encode(ViewBag.COUNT));
    var ctx = $("#bar_chart");
    var pieChart = new Chart(ctx,
        {
            type: 'bar',
            data: {
                labels: productsArray,
                datasets: [
                    {
                        label: "Sold product:",
                        data: count,
                        background: ["rgba(242,166,54,.5)","rgba(145,65,72,.5)", "(74,25,92,.5)"],
                        borderColor: ["rgba(242,166,54)", "rgba(145,65,72)", "rgba(74,25,92)"],
                        borderWidth: 1
                    }]
            },
            options: {
                maintainAspectRatio : false,
                scales: {xAxes:[{ticks:{beginAtZero:true} }] },
                legend: {display: false}
            },
        });
</script>